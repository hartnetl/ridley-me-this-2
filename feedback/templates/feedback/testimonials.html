{% extends "base.html" %}
{% load static %}

{% block page_header %}
<div class="container header-container">
    <div class="row">
        <div class="col">

        </div>
    </div>
</div>
{% endblock %}

{% block content %}

<h1>Customer Testimonials</h1>

{% if user.is_authenticated %}
<a href="{% url 'add_testimonial' %}" class="btn btn-success">Add a testimonial</a>
{% endif %}

<div class="container-fluid">
    <div class="row">
        <div class="col-12 mt-3 left">
            {% for testimonial in testimonials_list %}

            <span>
                <img alt="user uploaded image" src="{{ testimonial.icon }}">
                <strong>{{ testimonial.reviewed_by }}</strong> says:

            </span>
            <div>
                <strong>Rating:{{ testimonial.rating }}/5 </strong><br>
                {{ testimonial.content }}<br>
                <span class="small right">{{ testimonial.reviewed_on}}</span>
                {% if user.is_superuser %}
                    <a href="{% url 'delete_testimonial' testimonial.id %}" class="small">delete</a>
                {% elif user.is_authenticated and user == testimonial.reviewed_by %}
                <a href="{% url 'edit_testimonial' testimonial.id %}" class="small">edit</a>
                <a href="{% url 'delete_testimonial' testimonial.id %}" class="small">delete</a>
                {% endif %}
               
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- pagination -->
{% if is_paginated %}
<div class="pagination">
    <div class="step-links">
        {% if page_obj.has_previous %}
        <a href="?page=1">&laquo; First</a>
        <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">Next</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">Last &raquo;</a>
        {% endif %}
    </div>
</div>
{% endif %}

{% endblock %}